<!doctype html> <html lang="en"> <head> <meta charset="utf-8" /> <title>WebXR Debug Loader</title> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <style> html,body{margin:0;height:100%;overflow:hidden;background:#202225} #hud{position:fixed;left:8px;top:8px;z-index:9;background:#000c;color:#fff;padding:8px 10px;border-radius:8px;font:12px/1.4 system-ui;white-space:pre-wrap;max-width:90vw} </style> </head> <body> <div id="hud">Booting…</div> <script> const hud = document.getElementById('hud'); function log(...a){ hud.textContent += "\n" + a.join(" "); } window.addEventListener('error', e => log("JS Error:", e.message)); window.addEventListener('unhandledrejection', e => log("Promise Rejection:", e.reason)); (async ()=>{ hud.textContent = `HTTPS: ${location.protocol} Time: ${new Date().toLocaleString()} UA: ${navigator.userAgent} `; // WebXR capability probe (shows even if modules fail) const hasXR = !!navigator.xr; let immersiveOK = false; try { immersiveOK = hasXR && await navigator.xr.isSessionSupported('immersive-vr'); } catch(e){ log("isSessionSupported err:", e); } log("navigator.xr:", hasXR, "immersive-vr:", immersiveOK); })(); </script> <!-- MAIN APP: use CDN imports with cache-busting --> <script type="module"> import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.160/build/three.module.js?v=2"; import { VRButton } from "https://cdn.jsdelivr.net/npm/three@0.160/examples/jsm/webxr/VRButton.js?v=2"; import { GLTFLoader } from "https://cdn.jsdelivr.net/npm/three@0.160/examples/jsm/loaders/GLTFLoader.js?v=2"; const hud = document.getElementById('hud'); function log(...a){ hud.textContent += "\n" + a.join(" "); } // scene const scene = new THREE.Scene(); scene.background = new THREE.Color(0x202225); scene.add(new THREE.HemisphereLight(0xffffff, 0x404040, 1.0)); const d = new THREE.DirectionalLight(0xffffff, 1.0); d.position.set(10,20,10); scene.add(d); // renderer/camera const camera = new THREE.PerspectiveCamera(70, innerWidth/innerHeight, 0.01, 1000); const renderer = new THREE.WebGLRenderer({antialias:true}); renderer.setPixelRatio(devicePixelRatio); renderer.setSize(innerWidth, innerHeight); renderer.xr.enabled = true; document.body.appendChild(renderer.domElement); try { document.body.appendChild(VRButton.createButton(renderer)); log("VRButton added ✔"); } catch(e) { log("VRButton error:", e); } // helpers + floor const grid = new THREE.GridHelper(200,200); grid.position.y = 0; scene.add(grid); const floor = new THREE.Mesh(new THREE.PlaneGeometry(200,200), new THREE.MeshStandardMaterial({color:0x303338, roughness:1})); floor.rotation.x = -Math.PI/2; scene.add(floor); // try loading your model (adjust path) // If your file is in root, keep "jet.glb"; if in /models, use "models/jet.glb" const MODEL_URL = "./jet.glb?v=3"; // cache-bust const root = new THREE.Group(); scene.add(root); const loader = new GLTFLoader(); log("Loading:", MODEL_URL); loader.load(MODEL_URL, (gltf)=>{ log("Loaded OK:", MODEL_URL); const obj = gltf.scene; obj.scale.setScalar(1.0); // try 0.01 if authored in centimeters root.add(obj); // recenter to floor const bbox = new THREE.Box3().setFromObject(obj); const size = bbox.getSize(new THREE.Vector3()); const center = bbox.getCenter(new THREE.Vector3()); obj.position.add(new THREE.Vector3(-center.x, -bbox.min.y, -center.z)); log("Bounds (m):", `x:${size.x.toFixed(2)} y:${size.y.toFixed(2)} z:${size.z.toFixed(2)}`); }, (ev)=>{ const pct = ev.total ? Math.round(ev.loaded/ev.total*100)+"%" : ev.loaded+" bytes"; log("Progress:", pct); }, (err)=>{ log("GLB load error:", err?.message || err); }); // animate addEventListener('resize', ()=>{ camera.aspect = innerWidth/innerHeight; camera.updateProjectionMatrix(); renderer.setSize(innerWidth, innerHeight); }); renderer.setAnimationLoop(()=>renderer.render(scene, camera)); </script> </body> </html>